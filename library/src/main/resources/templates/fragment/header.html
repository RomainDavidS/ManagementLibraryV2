<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8">
</head>
<body>
    <header th:fragment="header">
        <!-- Fixed navbar [[${#httpServletRequest.remoteUser}]] -->


        <nav class="navbar navbar-expand-md navbar-light bg-light fixed-top" role="navigation" >
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsClimbing" aria-controls="navbarsClimbing" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="#">
                <img th:src="@{/img/logo-small.png}" th:href="@{/}" class="align-self-center mr-3" alt="Bibliothèque de Villeurbanne"/>
            </a>

            <div class="collapse navbar-collapse" id="navbarsClimbing">
                <ul class="navbar-nav mr-auto">

                    <li class="nav-item active">
                        <a class="nav-link" th:href="@{/}">Accueil</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" th:href="@{/book/all}">Liste des livres disponibles</a>
                    </li>
                    <li sec:authorize="isAuthenticated()" class="nav-item dropdown active">
                        <a class="nav-link dropdown-toggle" id="dropdown2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Mon profil
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="dropdown2">
                            <li><a class="dropdown-item" th:href="@{/lending/user}">Mes emprunts</a> </li>
                            <li><a class="dropdown-item" th:href="@{/reservation/user}">Mes réservations</a> </li>
                        </ul>
                    </li>

                    <li sec:authorize="isAuthenticated()" class="nav-item dropdown active">
                        <a class="nav-link dropdown-toggle" id="dropdown3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Gestion
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="dropdown3">
                            <li><a class="dropdown-item" th:href="@{/lending/all}">Liste des emprunts</a> </li>
                            <li><a class="dropdown-item" th:href="@{/reservation/all}">Liste des réservations</a> </li>
                        </ul>
                    </li>

                    <li class="nav-item active">
                        <a class="nav-link" th:href="@{/apropos}">A propos</a>
                    </li>
                </ul>
                <a sec:authorize="isAuthenticated()" class="nav-link text-muted w-25" th:text="${'Bienvenue ' + currentUser + ','}" >Bienvenue </a>
                <form class="form-inline mt-2 mt-md-0">
                    <a sec:authorize="isAnonymous()" class="btn btn-sm btn-outline-secondary ml-1" th:href="@{/login}">Connexion</a>
                    <a sec:authorize="isAuthenticated()" class="btn btn-sm btn-outline-secondary ml-1" th:href="@{/logout}">Déconnexion</a>
                </form>
            </div>

        </nav>


    </header>


</body>
</html>